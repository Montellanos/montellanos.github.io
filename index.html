<!DOCTYPE html>
<html>

<head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
    html,
    body {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    
    #map {
        height: 100%;
    }
    </style>
    <link rel=stylesheet href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="docs/css/bootstrap-3.3.2.min.css" type="text/css">
    <link rel="stylesheet" href="docs/css/bootstrap-example.css" type="text/css">
    <script type="text/javascript" src="docs/js/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="docs/js/bootstrap-3.3.2.min.js"></script>
    <link rel="stylesheet" href="dist/css/bootstrap-multiselect.css" type="text/css">
    <script type="text/javascript" src="dist/js/bootstrap-multiselect.js"></script>
</head>

<body>
    <div class="col-lg-4">
        <fieldset>
            <!-- Form Name -->
            <legend>Salud maps</legend>
            <!-- Text input-->
            <div class="form-group">
                <label class="col-md-4 control-label" for="nombre">Nombre</label>
                <div class="col-md-8">
                    <input id="nombre" name="nombre" type="text" placeholder="" class="form-control input-md" required="">
                </div>
            </div>
            <!-- Text input-->
            <div class="form-group">
                <label class="col-md-4 control-label" for="latitud">Latitud</label>
                <div class="col-md-8">
                    <input id="latitud" name="latitud" type="text" placeholder="0" class="form-control input-md" required="">
                </div>
            </div>
            <!-- Text input-->
            <div class="form-group">
                <label class="col-md-4 control-label" for="longitud">Longitud</label>
                <div class="col-md-8">
                    <input id="longitud" name="longitud" type="text" placeholder="0" class="form-control input-md" required="">
                </div>
            </div>
            <!-- Select Basic -->
            <div class="form-group">
                <label class="col-md-4 control-label" for="plan">Plan</label>
                <div class="col-md-8">
                    <select id="plan" name="plan" class="form-control">
                    </select>
                </div>
            </div>
            <!-- Textarea -->
            <div class="form-group">
                <label class="col-md-4 control-label" for="descripcion">Descripcion</label>
                <div class="col-md-8">
                    <textarea class="form-control" id="descripcion" name="descripcion"></textarea>
                </div>
            </div>
            <!-- Textarea -->
            <div class="form-group">
                <label class="col-md-4 control-label" for="horario">Horario de atencion</label>
                <div class="col-md-8">
                    <textarea class="form-control" id="horario" name="horario"></textarea>
                </div>
            </div>
            <!-- Text input-->
            <div class="form-group">
                <label class="col-md-4 control-label" for="telefono">Telefonos</label>
                <div class="col-md-8">
                    <input id="telefono" name="telefono" type="text" placeholder="" class="form-control input-md" required="">
                </div>
            </div>
            <!-- Select Multiple -->
            <div class="form-group">
                <label class="col-md-4 control-label" for="especialidades">Especialidades</label>
                <div class="col-md-8">
                    <select id="especialidades" name="especialidades" class="form-control" multiple="multiple">
                    </select>
                </div>
            </div>
            <!-- Select Multiple -->
            <div class="form-group">
                <label class="col-md-4 control-label" for="analisis">Analisis</label>
                <div class="col-md-8">
                    <select id="analisis" multiple="multiple">
                    </select>
                </div>
            </div>
            <!-- Button -->
            <div class="form-group">
                <label class="col-md-4 control-label" for="enviar"></label>
                <div class="col-md-4">
                    <button type="button" id="enviar" name="enviar" onclick="addespe()" class="btn btn-inverse">Enviar</button>
                </div>
            </div>
        </fieldset>
    </div>
    
    <div id="map"></div>
    <script>
    var map, marker;

    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            center: {
                lat: -21.540190,
                lng: -64.720398

            },
            zoom: 15
        });
        google.maps.event.addListener(map, 'click', function(e) {
            placeMarker(e.latLng);
        });
    }


    function placeMarker(position) {

        if (marker === undefined) {
            marker = new google.maps.Marker({
                position: position,
                map: map,
            });
        } else {
            marker.setPosition(position);
        }

        $('#latitud').val(position.lat());
        $('#longitud').val(position.lng());
    }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAdY8R5lQPdDO_ffF9WADgbYVsYmpfv3Vw&callback=initMap" async defer></script>
    <script src="https://www.gstatic.com/firebasejs/3.2.0/firebase.js"></script>
    <script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyCxMzC3JgNj66Y4plb0TyvcW7IX_-BVm7Q",
        authDomain: "saludmaps.firebaseapp.com",
        databaseURL: "https://saludmaps.firebaseio.com",
        storageBucket: "saludmaps.appspot.com",
    };
    firebase.initializeApp(config);


    firebase.database().ref('planes/').orderByKey().once('value', function(snapshot) {
        var select = "";
        snapshot.forEach(function(snapshot) {
            select = select + '<option value="' + snapshot.key + '">' + snapshot.val().nombre + '</option>';
        });
        $('#plan').html(select);
    });

    firebase.database().ref('especialidades/').orderByKey().once('value', function(snapshot) {
        var select = "";
        snapshot.forEach(function(snapshot) {
            select = select + '<option value="' + snapshot.key + '">' + snapshot.val().nombre + '</option>';
        });

        $('#especialidades').html(select).multiselect();

    });

    firebase.database().ref('analisis/').orderByKey().once('value', function(snapshot) {
        var select = "";
        snapshot.forEach(function(snapshot) {
            select = select + '<option value="' + snapshot.key + '">' + snapshot.val().nombre + '</option>';
        });
        $('#analisis').html(select).multiselect();

    });





    function adddata() {
        var postData = {
            nombre: 'Plan de Bronce',
            coaseguro: 30
        };


        var newPostKey = firebase.database().ref().child('planes').push().key;

        var updates = {};
        updates['/planes/' + newPostKey] = postData;

        return firebase.database().ref().update(updates);

    }
    </script>
</body>

</html>
